# skia-wasm-sdl-cpp

# Render green square with HTML Canvas
	HTML file with the code which uses HTML5 canvas to render the green square is 
	index_with_canvas.html

# Running Emscripten
Set up emscripten using the guidelines on official website:
https://emscripten.org/docs/getting_started/downloads.html

	# Fetch the latest version of the emsdk (not needed the first time you clone)
	git pull

	# Download and install the latest SDK tools.
	./emsdk install latest

	# Make the "latest" SDK "active" for the current user. (writes .emscripten file)
	./emsdk activate latest

	# Activate PATH and other environment variables in the current terminal
	source ./emsdk_env.sh
	
	# On Windows, run emsdk instead of ./emsdk, and emsdk_env.bat instead of source ./emsdk_env.sh.
	
	
Open Emscripten command prompt - emcmdprompt.bat

Create file hello_world.c in src folder


To build the JavaScript version of this code, simply specify the C/C++ file after emcc (use em++ to force compilation as C++):
	
	emcc ./src/hello_world.c 


You should see two files generated by that command: a.out.js and a.out.wasm. The second is a WebAssembly file containing the compiled code, and the first is a JavaScript file containing the runtime support to load and execute it. You can run them using node.js:

	node a.out.js


This prints "Hello Emscripten!!!" to the console, as expected.


# Generating HTML
Emscripten can also generate HTML for testing embedded JavaScript. To generate HTML, use the -o (output) command and specify an html file as the target file:

	emcc ./src/hello_world.c -o ./out/hello_world.html


You can now open hello.html from out folder in a web browser.

Unfortunately several browsers (including Chrome, Safari, and Internet Explorer) do not support file:// XHR requests, and can’t load extra files needed by the HTML (like a .wasm file, or packaged file data as mentioned lower down). For these browsers you’ll need to serve the files using a local webserver and then open http://localhost:8000/out/hello_world.html).

For this, 
type below python command in command prompt: 
	python -m http.server
	
and then open the file from browser using 
	http://localhost:8000/out/hello_world.html
	
Once you have the HTML loaded in your browser, you’ll see a text area for displaying the output of the printf() calls in the native code.



# Using SDL API
The HTML output isn’t limited just to just displaying text. You can also use the SDL API to show a colored square in a <canvas> element (on browsers that support it). For an example, build the hello_world_sdl.cpp test code and then refresh the browser.
	emcc ./src/hello_world_sdl.cpp -o ./out/hello_world_sdl.html
	
	
# Creating LOG file
Your C/C++ code can access files using the normal libc stdio API (fopen, fclose, etc.)

JavaScript is usually run in the sandboxed environment of a web browser, without direct access to the local file system. Emscripten simulates a file system that you can access from your compiled C/C++ code using the normal libc stdio API.

Files that you want to access should be preloaded or embedded into the virtual file system. Preloading (or embedding) generates a virtual file system that corresponds to the file system structure at compile time, relative to the current directory.

The hello_world_sdl_with_logging.cpp example shows how to load a file (both the test code and the file to be loaded shown below):

	emcc ./src/hello_world_sdl_with_logging.cpp -o ./out/hello_world_sdl_with_logging.html --preload-file ./log.txt


#----------------------------------------------------

# Canvas via Embind
hello_world_translated_javascript_with_embind.cpp shows how javascript code in index_with_canvas.html can be transliterated to C++ with Embind.

When linking this code, make sure to pass --bind to enable Embind:

	emcc --bind ./src/hello_world_translated_javascript_with_embind.cpp -o ./out/hello_world_translated_javascript_with_embind.html